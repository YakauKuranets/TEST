:root {
    --bg-0: #08090c;
    --bg-1: #0d0f14;
    --bg-2: #12151c;
    --bg-3: #181c26;
    --bg-4: #1e2330;
    --bg-5: #252b3a;
    --border: #252b3a;
    --text: #e8ecf4;
    --text-dim: #8892a8;
    --text-muted: #5c6478;
    --accent: #3b82f6;
    --accent-hover: #2563eb;
    --accent-glow: rgba(59, 130, 246, .15);
    --lg: linear-gradient(135deg, #3b82f6, #8b5cf6);
    --purple: #8b5cf6;
    --green: #22c55e;
    --red: #ef4444;
    --orange: #f59e0b;
    --radius: 10px;
    --radius-lg: 16px;
    --radius-sm: 6px;
    --font: 'Outfit', system-ui, sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
    --shadow-lg: 0 24px 64px rgba(0, 0, 0, .5);
    --transition: .2s cubic-bezier(.4, 0, .2, 1);
}

*, *::before, *::after { box-sizing: border-box; }
body { margin: 0; font-family: var(--font); color: var(--text); background: var(--bg-0); -webkit-font-smoothing: antialiased; }
.hidden { display: none !important; }

/* –°–ö–†–û–õ–õ–ë–ê–† */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--bg-5); border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

/* LAUNCHER */
.launcher { position: fixed; inset: 0; z-index: 100; display: flex; align-items: center; justify-content: center; }
.launcher__bg { position: absolute; inset: 0; background: radial-gradient(ellipse 60% 50% at 20% 80%, rgba(59, 130, 246, .08), transparent), radial-gradient(ellipse 50% 40% at 80% 20%, rgba(139, 92, 246, .06), transparent), var(--bg-0); }
.launcher__content { position: relative; z-index: 1; width: 100%; max-width: 680px; padding: 48px 40px; animation: fadeUp .5s ease-out; }

@keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

.launcher__header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 48px; }
.launcher__logo { display: flex; align-items: center; gap: 16px; }
.logo-icon { width: 56px; height: 56px; display: flex; align-items: center; justify-content: center; background: var(--bg-3); border-radius: 14px; border: 1px solid var(--border); box-shadow: 0 0 30px rgba(59, 130, 246, .1); }
.launcher__title { font-size: 28px; font-weight: 700; margin: 0; background: linear-gradient(135deg, #e8ecf4 40%, #60a5fa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.launcher__subtitle { font-size: 13px; color: var(--text-dim); margin: 4px 0 0; }

.gear-btn { width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; background: var(--bg-3); border: 1px solid var(--border); border-radius: var(--radius); color: var(--text-dim); cursor: pointer; transition: var(--transition); }
.gear-btn:hover { background: var(--bg-4); color: var(--text); border-color: var(--accent); }

.launcher__cards { display: flex; flex-direction: column; gap: 16px; }
.launcher__card { display: flex; align-items: center; gap: 24px; padding: 28px 32px; text-align: left; background: var(--bg-2); border: 1px solid var(--border); border-radius: var(--radius-lg); cursor: pointer; transition: var(--transition); position: relative; overflow: hidden; color: var(--text); width: 100%; box-sizing: border-box; }
.launcher__card:hover { border-color: var(--accent); transform: translateY(-2px); box-shadow: 0 12px 40px rgba(59, 130, 246, .1); }
.card__icon--video { color: var(--accent); }
.card__icon--photo { color: var(--purple); }

/* WORKSPACE */
.app { display: flex; min-height: 100vh; }
.sidebar { width: 260px; background: var(--bg-1); border-right: 1px solid var(--border); padding: 16px 12px; display: flex; flex-direction: column; gap: 12px; flex-shrink: 0; }
.sidebar__top-row { display: flex; align-items: center; gap: 8px; }
.sidebar__title { font-size: 16px; font-weight: 600; margin: 0; flex: 1; }

.upload { display: flex; align-items: center; justify-content: center; gap: 8px; background: var(--bg-3); border: 1px solid var(--border); border-radius: var(--radius); padding: 10px 12px; cursor: pointer; font-size: 13px; transition: var(--transition); }
.upload:hover { border-color: var(--accent); background: var(--bg-4); }
.upload input { display: none; }

.mode-switcher { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
.mode-btn { padding: 7px 10px; font-size: 12px; font-weight: 500; background: var(--bg-3); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text-dim); cursor: pointer; transition: var(--transition); }
.mode-btn.active { background: var(--accent); color: #fff; border-color: var(--accent); }

.playlist { list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: 4px; overflow-y: auto; flex: 1; }
.playlist:empty::before { content: '–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∞–Ω–∞–ª–∏–∑–∞'; display: block; margin: 8px 0; padding: 10px 12px; color: var(--text-muted); font-size: 12px; border: 1px dashed var(--border); border-radius: var(--radius-sm); }
.playlist li { padding: 10px 12px; border-radius: var(--radius-sm); cursor: pointer; transition: var(--transition); }
.playlist li:hover { background: var(--bg-3); }
.playlist li.active { background: var(--accent-glow); border-left: 3px solid var(--accent); }

/* MAIN VIEWER */
.main { flex: 1; padding: 16px; display: grid; gap: 16px; grid-template-columns: minmax(0, 1fr) 340px; height: 100vh; overflow: hidden; }
.viewer { display: flex; flex-direction: column; gap: 8px; }
.viewer__surface { position: relative; background: #000; border-radius: var(--radius-lg); border: 1px solid var(--border); overflow: hidden; height: 500px; display: flex; align-items: center; justify-content: center; cursor: default; }

/* AI OVERLAY & CURSOR */
.viewer__surface.segmenting { cursor: crosshair; }
#pro-canvas { max-width: 100%; max-height: 100%; object-fit: contain; }
.ai-overlay { position: absolute; inset: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; }

.motion-indicator { position: absolute; top: 12px; right: 12px; background: var(--red); padding: 5px 12px; border-radius: 999px; font-size: 11px; font-weight: 600; opacity: 0; transition: opacity .2s; z-index: 20; }
.motion-indicator.active { opacity: 1; }

/* TOOLBARS */
.viewer__toolbar { display: flex; align-items: center; gap: 4px; padding: 8px 12px; background: var(--bg-2); border: 1px solid var(--border); border-radius: var(--radius); flex-wrap: wrap; position: relative; z-index: 1; }
.tb-btn { display: inline-flex; align-items: center; justify-content: center; gap: 6px; height: 34px; padding: 0 12px; background: var(--bg-3); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text-dim); font-size: 12px; font-weight: 500; cursor: pointer; transition: var(--transition); }
.tb-btn:hover { background: var(--bg-4); color: var(--text); border-color: var(--text-muted); }
.tb-btn--accent { background: var(--accent); color: #fff; border-color: var(--accent); }
.tb-btn--ai { background: rgba(139, 92, 246, 0.1); color: var(--purple); border-color: rgba(139, 92, 246, 0.3); }
.tb-btn--ai:hover { background: var(--purple); color: #fff; }
.tb-sep { width: 1px; height: 20px; background: var(--border); margin: 0 6px; }

/* CONTROLS & TABS */
.controls { display: flex; flex-direction: column; gap: 12px; overflow-y: auto; padding-bottom: 20px; }
.controls-tabs { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; position: sticky; top: 0; background: var(--bg-0); padding-bottom: 8px; z-index: 30; }
.tab-button { border: 1px solid var(--border); background: var(--bg-2); color: var(--text-dim); padding: 10px; cursor: pointer; border-radius: var(--radius-sm); font-size: 12px; }
.tab-button.active { background: var(--bg-4); border-color: var(--accent); color: var(--text); }

.control-group { background: var(--bg-2); border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; display: flex; flex-direction: column; gap: 12px; }
.control-group h2 { font-size: 11px; font-weight: 700; text-transform: uppercase; color: var(--text-muted); margin: 0; letter-spacing: 0.05em; }

/* AI HUB & MODELS IN SETTINGS */
.ai-models-list { display: flex; flex-direction: column; gap: 8px; margin-top: 10px; }
.model-item { display: flex; align-items: center; justify-content: space-between; padding: 12px; background: var(--bg-1); border: 1px solid var(--border); border-radius: var(--radius-sm); }
.model-info strong { display: block; font-size: 13px; color: var(--text); }
.model-info span { font-size: 11px; color: var(--text-muted); font-family: var(--font-mono); }

/* BADGES */
.badge { padding: 4px 8px; border-radius: 4px; font-size: 10px; font-weight: 700; font-family: var(--font-mono); text-transform: uppercase; }
.badge-success { background: rgba(34, 197, 94, 0.15); color: var(--green); border: 1px solid rgba(34, 197, 94, 0.2); }
.badge-error { background: rgba(239, 68, 68, 0.15); color: var(--red); border: 1px solid rgba(239, 68, 68, 0.2); }

/* MODALS */
.modal-overlay { position: fixed; inset: 0; z-index: 20000; display: none; align-items: center; justify-content: center; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); }
.modal-overlay.open { display: flex; }
.modal-panel { background: var(--bg-2); border: 1px solid var(--border); border-radius: var(--radius-lg); width: 100%; max-width: 540px; animation: modalIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); }
@keyframes modalIn { from { transform: scale(0.9) translateY(20px); opacity: 0; } to { transform: scale(1) translateY(0); opacity: 1; } }

.modal-panel__header { padding: 20px 24px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
.modal-panel__body { padding: 24px; max-height: 60vh; overflow-y: auto; }
.modal-panel__footer { padding: 16px 24px; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 10px; }

/* TIMELINE */
.timeline-slider { width: 100%; height: 6px; border-radius: 3px; background: var(--bg-4); outline: none; -webkit-appearance: none; }
.timeline-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 14px; height: 14px; background: var(--accent); border-radius: 50%; cursor: pointer; box-shadow: 0 0 10px var(--accent-glow); }

/* LOGS */
.log-list { list-style: none; padding: 8px; margin: 0; background: var(--bg-1); border-radius: var(--radius-sm); border: 1px solid var(--border); max-height: 200px; overflow-y: auto; font-family: var(--font-mono); font-size: 11px; }
.log-item { padding: 4px 8px; border-radius: 3px; margin-bottom: 2px; }
.log-ai { color: var(--purple); background: rgba(139, 92, 246, 0.05); }
.log-ai-success { color: var(--green); }
.log-ai-error { color: var(--red); }

/* RESPONSIVE */
@media (max-width: 1024px) {
    .main { grid-template-columns: 1fr; height: auto; overflow: visible; }
    .controls { max-height: none; }
    .viewer__toolbar { gap: 6px; }
    .tb-btn { padding: 0 10px; min-width: 34px; }
}

/* ‚ïê‚ïê‚ïê SMART LOCKS (Phase 2) ‚ïê‚ïê‚ïê */
.locked-tool { opacity: 0.5; cursor: not-allowed !important; position: relative; pointer-events: auto; }
.locked-tool::after { content: 'üîí'; position: absolute; top: -4px; right: -4px; font-size: 10px; background: var(--bg-2); border-radius: 50%; padding: 1px 3px; }
.locked-tool:hover::after { content: 'üîí –°–∫–∞—á–∞–π'; font-size: 9px; padding: 2px 6px; white-space: nowrap; }
.is-locked { opacity: 0.5; pointer-events: none; }
.is-locked::after { content: "üîí"; margin-left: 4px; }

.hardware-locked { opacity: 0.3; cursor: not-allowed !important; }
.hardware-locked::after { content: 'üõë'; position: absolute; top: -4px; right: -4px; font-size: 10px; }

.downloading-tool { position: relative; }
.downloading-tool::after { content: '‚è≥'; position: absolute; top: -4px; right: -4px; font-size: 10px; animation: pulse 1s infinite; }
@keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.4; } }

/* ‚ïê‚ïê‚ïê VRAM BAR ‚ïê‚ïê‚ïê */
.vram-bar { width: 100%; height: 20px; background: var(--bg-3); border-radius: var(--radius-sm); overflow: hidden; position: relative; border: 1px solid var(--border); }
.vram-bar__fill { height: 100%; border-radius: var(--radius-sm); transition: width 0.5s ease, background 0.5s ease; }
.vram-bar__fill--green { background: linear-gradient(90deg, #22c55e, #16a34a); }
.vram-bar__fill--yellow { background: linear-gradient(90deg, #f59e0b, #d97706); }
.vram-bar__fill--red { background: linear-gradient(90deg, #ef4444, #dc2626); }
.vram-bar__label { position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: flex; align-items: center; justify-content: center; font-size: 10px; font-family: var(--font-mono); color: var(--text); text-shadow: 0 1px 2px rgba(0,0,0,.8); }

/* ‚ïê‚ïê‚ïê AI HUB (Model cards in settings) ‚ïê‚ïê‚ïê */
.model-card { display: flex; align-items: center; gap: 10px; padding: 8px 10px; background: var(--bg-2); border-radius: var(--radius-sm); border: 1px solid var(--border); margin-bottom: 6px; transition: border-color var(--transition); }
.model-card:hover { border-color: var(--accent); }
.model-card__info { flex: 1; min-width: 0; }
.model-card__name { font-weight: 600; font-size: 13px; }
.model-card__meta { font-size: 10px; color: var(--text-dim); }
.model-card__state { font-size: 11px; padding: 2px 8px; border-radius: 10px; white-space: nowrap; }
.model-card__state--active { background: rgba(34,197,94,.15); color: var(--green); }
.model-card__state--disk { background: rgba(148,163,184,.1); color: var(--text-dim); }
.model-card__state--missing { background: rgba(239,68,68,.1); color: var(--red); }
.model-card__state--downloading { background: rgba(245,158,11,.15); color: var(--orange); }
.model-card__state--locked { background: rgba(100,100,100,.15); color: #888; }
.model-card__actions { display: flex; gap: 4px; }
.model-card__progress { width: 100%; height: 4px; background: var(--bg-4); border-radius: 2px; margin-top: 4px; overflow: hidden; }
.model-card__progress-fill { height: 100%; background: var(--accent); border-radius: 2px; transition: width 0.3s ease; }
.vram-progress--green { background: linear-gradient(90deg, #22c55e, #16a34a) !important; }
.vram-progress--yellow { background: linear-gradient(90deg, #f59e0b, #d97706) !important; }
.vram-progress--red { background: linear-gradient(90deg, #ef4444, #dc2626) !important; }

/* ‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê */
.toast-container { position: fixed; top: 20px; right: 20px; z-index: 10000; display: flex; flex-direction: column; gap: 8px; }
.toast { padding: 10px 16px; background: var(--bg-3); border: 1px solid var(--border); border-radius: var(--radius); color: var(--text); font-size: 12px; box-shadow: var(--shadow-lg); animation: slideIn 0.3s ease, fadeOut 0.3s ease 3.7s forwards; max-width: 340px; }
.toast--warning { border-color: var(--orange); }
.toast--error { border-color: var(--red); }
.toast--success { border-color: var(--green); }
@keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
@keyframes fadeOut { to { opacity: 0; transform: translateY(-10px); } }

/* ‚ïê‚ïê‚ïê SMALL UTILITIES ‚ïê‚ïê‚ïê */
.sep { border: 0; border-top: 1px solid var(--border); margin: 10px 0; }
.ai-list { max-height: 80px; overflow-y: auto; font-size: 11px; }
.mono-sm { font-family: var(--font-mono); font-size: 10px; color: var(--text-dim); }
.btn-xs { font-size: 10px; padding: 2px 8px; }
.floating-panel { position: fixed; background: var(--bg-2); border: 1px solid var(--border); border-radius: var(--radius); padding: 12px; box-shadow: var(--shadow-lg); z-index: 100; }
.slider-grid { display: grid; gap: 6px; }
.slider-grid label { display: flex; flex-direction: column; gap: 2px; font-size: 11px; color: var(--text-dim); }
.slider-grid input[type="range"] { width: 100%; }
.button-row { display: flex; gap: 4px; flex-wrap: wrap; }

/* ‚ïê‚ïê‚ïê MISSING CLASSES ‚ïê‚ïê‚ïê */
.back-btn { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; background: var(--bg-3); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text-dim); cursor: pointer; transition: var(--transition); font-size: 14px; }
.back-btn:hover { background: var(--bg-4); color: var(--text); }
.btn-accent { background: var(--accent); color: #fff; border: 1px solid var(--accent); border-radius: var(--radius-sm); padding: 8px 14px; cursor: pointer; font-size: 12px; font-weight: 600; transition: var(--transition); }
.btn-accent:hover { background: var(--accent-hover); }
.btn-ghost { background: transparent; color: var(--text-dim); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 6px 12px; cursor: pointer; font-size: 12px; transition: var(--transition); }
.btn-ghost:hover { background: var(--bg-3); color: var(--text); border-color: var(--text-muted); }
.card__arrow { font-size: 20px; color: var(--text-muted); margin-left: auto; }
.card__icon { font-size: 32px; width: 56px; height: 56px; display: flex; align-items: center; justify-content: center; background: var(--bg-3); border-radius: 14px; flex-shrink: 0; }
.card__text h2 { font-size: 18px; margin: 0 0 4px; }
.card__text p { font-size: 13px; color: var(--text-dim); margin: 0; }
.launcher__footer { display: flex; justify-content: space-between; align-items: center; margin-top: 32px; }
.launcher__version { font-size: 12px; color: var(--text-muted); font-family: var(--font-mono); }
.launcher__backend-status { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--text-dim); }
.status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--text-muted); display: inline-block; }
.status-dot.online { background: var(--green); box-shadow: 0 0 8px rgba(34, 197, 94, .5); }
.modal-x { background: none; border: none; color: var(--text-dim); font-size: 24px; cursor: pointer; padding: 4px 8px; }
.modal-x:hover { color: var(--text); }
.muted { color: var(--text-muted); font-size: 12px; }
.sidebar__header { display: flex; flex-direction: column; gap: 10px; }
.photo-only { }
.video-only { }
.tab-panel { display: none; }
.tab-panel.active { display: flex !important; flex-direction: column; gap: 12px; }
.tab-basic, .tab-ai, .tab-forensic, .tab-case { }
.timeline-header { font-family: var(--font-mono); font-size: 12px; color: var(--text-dim); }
.timeline-markers { position: relative; height: 12px; }
.toggle { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--text-dim); cursor: pointer; }
.toggle input { accent-color: var(--accent); }

.settings-tabs { display:flex; gap:8px; margin-bottom:12px; }
.settings-tab { flex:1; border:1px solid var(--border); background: var(--bg-3); color: var(--text-dim); border-radius: var(--radius-sm); padding: 8px 10px; cursor:pointer; transition: var(--transition); }
.settings-tab.is-active { background: var(--lg); color: #fff; border-color: transparent; box-shadow: 0 0 0 1px rgba(255,255,255,0.04) inset; }
.settings-panel { opacity: 0; max-height: 0; overflow: hidden; transform: translateY(4px); transition: opacity .22s ease, transform .22s ease, max-height .22s ease; }
.settings-panel.is-active { opacity: 1; max-height: 2000px; transform: translateY(0); }

.settings-section { margin-bottom: 16px; }
.settings-section h3 { font-size: 12px; font-weight: 600; color: var(--text-dim); text-transform: uppercase; margin: 12px 0 8px; letter-spacing: 0.05em; }
label { display: flex; flex-direction: column; gap: 2px; font-size: 11px; color: var(--text-dim); }
input[type="text"], input[type="email"], input[type="password"], input[type="number"], select, textarea { background: var(--bg-1); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text); padding: 6px 10px; font-size: 12px; font-family: var(--font); outline: none; }
input:focus, select:focus, textarea:focus { border-color: var(--accent); }
.controls-tabs { grid-template-columns: repeat(4, 1fr); }
.workspace { min-height: 100vh; }
